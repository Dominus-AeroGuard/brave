import { Test } from '@nestjs/testing';
import {
  CreateProtectedAreaRequest,
  CreateProtectedAreaUseCase,
} from './create-protected-area.use-case';
import { IProtectedAreaRepository } from '../../../infra/prisma/repositories/protected-area.repository';
import { Readable } from 'stream';

describe('CreateUserOrganizationUseCase', () => {
  let useCase: CreateProtectedAreaUseCase;
  let repository: IProtectedAreaRepository;

  beforeEach(async () => {
    const moduleRef = await Test.createTestingModule({
      providers: [
        CreateProtectedAreaUseCase,
        {
          provide: 'IProtectedAreaRepository',
          useValue: {
            createMany: jest.fn(),
          },
        },
      ],
    }).compile();

    useCase = moduleRef.get<CreateProtectedAreaUseCase>(
      CreateProtectedAreaUseCase,
    );
    repository = moduleRef.get<IProtectedAreaRepository>(
      'IProtectedAreaRepository',
    );
  });

  describe('execute', () => {
    it('should create protected areas and return the count created', async () => {
      // Arrange
      const u8 = new Uint8Array([
        60, 63, 120, 109, 108, 32, 118, 101, 114, 115, 105, 111, 110, 61, 34,
        49, 46, 48, 34, 32, 101, 110, 99, 111, 100, 105, 110, 103, 61, 34, 117,
        116, 102, 45, 56, 34, 32, 63, 62, 10, 60, 107, 109, 108, 32, 120, 109,
        108, 110, 115, 61, 34, 104, 116, 116, 112, 58, 47, 47, 119, 119, 119,
        46, 111, 112, 101, 110, 103, 105, 115, 46, 110, 101, 116, 47, 107, 109,
        108, 47, 50, 46, 50, 34, 62, 10, 60, 68, 111, 99, 117, 109, 101, 110,
        116, 32, 105, 100, 61, 34, 114, 111, 111, 116, 95, 100, 111, 99, 34, 62,
        10, 60, 83, 99, 104, 101, 109, 97, 32, 110, 97, 109, 101, 61, 34, 97,
        112, 112, 34, 32, 105, 100, 61, 34, 97, 112, 112, 34, 62, 10, 9, 60, 83,
        105, 109, 112, 108, 101, 70, 105, 101, 108, 100, 32, 110, 97, 109, 101,
        61, 34, 116, 105, 109, 101, 115, 116, 97, 109, 112, 34, 32, 116, 121,
        112, 101, 61, 34, 115, 116, 114, 105, 110, 103, 34, 62, 60, 47, 83, 105,
        109, 112, 108, 101, 70, 105, 101, 108, 100, 62, 10, 9, 60, 83, 105, 109,
        112, 108, 101, 70, 105, 101, 108, 100, 32, 110, 97, 109, 101, 61, 34,
        98, 101, 103, 105, 110, 34, 32, 116, 121, 112, 101, 61, 34, 115, 116,
        114, 105, 110, 103, 34, 62, 60, 47, 83, 105, 109, 112, 108, 101, 70,
        105, 101, 108, 100, 62, 10, 9, 60, 83, 105, 109, 112, 108, 101, 70, 105,
        101, 108, 100, 32, 110, 97, 109, 101, 61, 34, 101, 110, 100, 34, 32,
        116, 121, 112, 101, 61, 34, 115, 116, 114, 105, 110, 103, 34, 62, 60,
        47, 83, 105, 109, 112, 108, 101, 70, 105, 101, 108, 100, 62, 10, 9, 60,
        83, 105, 109, 112, 108, 101, 70, 105, 101, 108, 100, 32, 110, 97, 109,
        101, 61, 34, 97, 108, 116, 105, 116, 117, 100, 101, 77, 111, 100, 101,
        34, 32, 116, 121, 112, 101, 61, 34, 115, 116, 114, 105, 110, 103, 34,
        62, 60, 47, 83, 105, 109, 112, 108, 101, 70, 105, 101, 108, 100, 62, 10,
        9, 60, 83, 105, 109, 112, 108, 101, 70, 105, 101, 108, 100, 32, 110, 97,
        109, 101, 61, 34, 116, 101, 115, 115, 101, 108, 108, 97, 116, 101, 34,
        32, 116, 121, 112, 101, 61, 34, 115, 116, 114, 105, 110, 103, 34, 62,
        60, 47, 83, 105, 109, 112, 108, 101, 70, 105, 101, 108, 100, 62, 10, 9,
        60, 83, 105, 109, 112, 108, 101, 70, 105, 101, 108, 100, 32, 110, 97,
        109, 101, 61, 34, 101, 120, 116, 114, 117, 100, 101, 34, 32, 116, 121,
        112, 101, 61, 34, 115, 116, 114, 105, 110, 103, 34, 62, 60, 47, 83, 105,
        109, 112, 108, 101, 70, 105, 101, 108, 100, 62, 10, 9, 60, 83, 105, 109,
        112, 108, 101, 70, 105, 101, 108, 100, 32, 110, 97, 109, 101, 61, 34,
        118, 105, 115, 105, 98, 105, 108, 105, 116, 121, 34, 32, 116, 121, 112,
        101, 61, 34, 115, 116, 114, 105, 110, 103, 34, 62, 60, 47, 83, 105, 109,
        112, 108, 101, 70, 105, 101, 108, 100, 62, 10, 9, 60, 83, 105, 109, 112,
        108, 101, 70, 105, 101, 108, 100, 32, 110, 97, 109, 101, 61, 34, 100,
        114, 97, 119, 79, 114, 100, 101, 114, 34, 32, 116, 121, 112, 101, 61,
        34, 115, 116, 114, 105, 110, 103, 34, 62, 60, 47, 83, 105, 109, 112,
        108, 101, 70, 105, 101, 108, 100, 62, 10, 9, 60, 83, 105, 109, 112, 108,
        101, 70, 105, 101, 108, 100, 32, 110, 97, 109, 101, 61, 34, 105, 99,
        111, 110, 34, 32, 116, 121, 112, 101, 61, 34, 115, 116, 114, 105, 110,
        103, 34, 62, 60, 47, 83, 105, 109, 112, 108, 101, 70, 105, 101, 108,
        100, 62, 10, 60, 47, 83, 99, 104, 101, 109, 97, 62, 10, 60, 70, 111,
        108, 100, 101, 114, 62, 60, 110, 97, 109, 101, 62, 97, 112, 112, 60, 47,
        110, 97, 109, 101, 62, 10, 32, 32, 60, 80, 108, 97, 99, 101, 109, 97,
        114, 107, 62, 10, 9, 60, 110, 97, 109, 101, 62, 97, 112, 112, 45, 48,
        50, 60, 47, 110, 97, 109, 101, 62, 10, 9, 60, 83, 116, 121, 108, 101,
        62, 60, 76, 105, 110, 101, 83, 116, 121, 108, 101, 62, 60, 99, 111, 108,
        111, 114, 62, 102, 102, 48, 48, 48, 48, 102, 102, 60, 47, 99, 111, 108,
        111, 114, 62, 60, 47, 76, 105, 110, 101, 83, 116, 121, 108, 101, 62, 60,
        80, 111, 108, 121, 83, 116, 121, 108, 101, 62, 60, 102, 105, 108, 108,
        62, 48, 60, 47, 102, 105, 108, 108, 62, 60, 47, 80, 111, 108, 121, 83,
        116, 121, 108, 101, 62, 60, 47, 83, 116, 121, 108, 101, 62, 10, 32, 32,
        32, 32, 32, 32, 60, 80, 111, 108, 121, 103, 111, 110, 62, 60, 111, 117,
        116, 101, 114, 66, 111, 117, 110, 100, 97, 114, 121, 73, 115, 62, 60,
        76, 105, 110, 101, 97, 114, 82, 105, 110, 103, 62, 60, 99, 111, 111,
        114, 100, 105, 110, 97, 116, 101, 115, 62, 45, 53, 51, 46, 55, 53, 51,
        50, 57, 53, 54, 54, 49, 51, 53, 51, 52, 44, 45, 50, 50, 46, 52, 50, 55,
        56, 52, 54, 51, 56, 49, 49, 49, 48, 55, 44, 48, 32, 45, 53, 51, 46, 55,
        53, 49, 54, 52, 57, 54, 57, 56, 52, 57, 52, 54, 44, 45, 50, 50, 46, 52,
        50, 54, 56, 52, 52, 57, 57, 49, 49, 49, 57, 55, 44, 48, 32, 45, 53, 51,
        46, 55, 53, 49, 48, 49, 54, 54, 51, 53, 56, 53, 54, 54, 44, 45, 50, 50,
        46, 52, 50, 54, 50, 53, 55, 57, 54, 57, 52, 48, 48, 56, 44, 48, 32, 45,
        53, 51, 46, 55, 53, 48, 57, 51, 54, 48, 54, 52, 50, 52, 56, 49, 44, 45,
        50, 50, 46, 52, 50, 53, 53, 51, 50, 56, 50, 52, 57, 50, 52, 53, 44, 48,
        32, 45, 53, 51, 46, 55, 53, 49, 50, 52, 54, 56, 52, 48, 52, 53, 50, 50,
        44, 45, 50, 50, 46, 52, 50, 52, 56, 51, 48, 55, 48, 48, 57, 48, 55, 56,
        44, 48, 32, 45, 53, 51, 46, 55, 53, 49, 55, 48, 55, 50, 52, 57, 54, 52,
        51, 53, 44, 45, 50, 50, 46, 52, 50, 52, 51, 56, 49, 56, 48, 49, 57, 52,
        54, 51, 44, 48, 32, 45, 53, 51, 46, 55, 53, 50, 50, 48, 50, 49, 56, 57,
        53, 50, 52, 49, 44, 45, 50, 50, 46, 52, 50, 52, 49, 57, 55, 54, 51, 56,
        50, 54, 57, 56, 44, 48, 32, 45, 53, 51, 46, 55, 53, 50, 55, 48, 56, 54,
        51, 57, 54, 51, 52, 53, 44, 45, 50, 50, 46, 52, 50, 52, 49, 50, 56, 53,
        55, 54, 56, 57, 49, 49, 44, 48, 32, 45, 53, 51, 46, 55, 53, 51, 50, 54,
        49, 49, 51, 48, 54, 54, 52, 44, 45, 50, 50, 46, 52, 50, 52, 49, 50, 56,
        53, 55, 54, 56, 57, 49, 49, 44, 48, 32, 45, 53, 51, 46, 55, 53, 51, 56,
        53, 57, 54, 54, 50, 54, 49, 50, 55, 44, 45, 50, 50, 46, 52, 50, 52, 51,
        48, 49, 50, 51, 48, 51, 51, 55, 57, 44, 48, 32, 45, 53, 51, 46, 55, 53,
        52, 51, 53, 52, 54, 48, 50, 52, 57, 51, 51, 44, 45, 50, 50, 46, 52, 50,
        52, 52, 53, 48, 56, 54, 51, 51, 50, 53, 44, 48, 32, 45, 53, 51, 46, 55,
        53, 52, 54, 56, 56, 51, 57, 57, 49, 53, 55, 44, 45, 50, 50, 46, 52, 50,
        52, 54, 51, 53, 48, 50, 55, 48, 48, 49, 53, 44, 48, 32, 45, 53, 51, 46,
        55, 53, 53, 49, 48, 50, 55, 54, 55, 52, 50, 57, 49, 44, 45, 50, 50, 46,
        52, 50, 53, 48, 51, 55, 56, 56, 53, 48, 52, 51, 57, 44, 48, 32, 45, 53,
        51, 46, 55, 53, 53, 51, 57, 48, 53, 50, 51, 49, 55, 51, 55, 44, 45, 50,
        50, 46, 52, 50, 53, 52, 52, 48, 55, 52, 51, 48, 56, 54, 51, 44, 48, 32,
        45, 53, 51, 46, 55, 53, 53, 54, 50, 48, 55, 50, 55, 55, 54, 57, 51, 44,
        45, 50, 50, 46, 52, 50, 53, 57, 49, 50, 54, 54, 50, 53, 48, 55, 51, 44,
        48, 32, 45, 53, 51, 46, 55, 53, 53, 57, 48, 56, 52, 56, 51, 53, 49, 51,
        57, 44, 45, 50, 50, 46, 52, 50, 54, 53, 53, 55, 50, 51, 53, 51, 55, 53,
        49, 44, 48, 32, 45, 53, 51, 46, 55, 53, 54, 49, 57, 54, 50, 51, 57, 50,
        53, 56, 52, 44, 45, 50, 50, 46, 52, 50, 55, 49, 54, 55, 50, 55, 55, 53,
        53, 51, 53, 44, 48, 32, 45, 53, 51, 46, 55, 53, 54, 49, 55, 51, 50, 49,
        56, 55, 57, 56, 57, 44, 45, 50, 50, 46, 52, 50, 56, 48, 53, 51, 53, 54,
        53, 50, 52, 54, 55, 44, 48, 32, 45, 53, 51, 46, 55, 53, 53, 57, 56, 57,
        48, 53, 53, 49, 50, 50, 51, 44, 45, 50, 50, 46, 52, 50, 56, 53, 49, 51,
        57, 55, 52, 52, 51, 56, 44, 48, 32, 45, 53, 51, 46, 55, 53, 53, 55, 52,
        55, 51, 52, 48, 50, 57, 54, 57, 44, 45, 50, 50, 46, 52, 50, 56, 55, 51,
        50, 54, 54, 56, 56, 48, 51, 57, 44, 48, 32, 45, 53, 51, 46, 55, 53, 53,
        49, 57, 52, 56, 52, 57, 50, 54, 55, 52, 44, 45, 50, 50, 46, 52, 50, 56,
        56, 56, 50, 51, 48, 49, 55, 57, 49, 44, 48, 32, 45, 53, 51, 46, 55, 53,
        52, 49, 55, 48, 52, 51, 56, 56, 49, 54, 56, 44, 45, 50, 50, 46, 52, 50,
        56, 52, 50, 49, 56, 57, 50, 53, 57, 57, 56, 44, 48, 32, 45, 53, 51, 46,
        55, 53, 52, 49, 55, 48, 52, 51, 56, 56, 49, 54, 56, 44, 45, 50, 50, 46,
        52, 50, 56, 52, 50, 49, 56, 57, 50, 53, 57, 57, 56, 44, 48, 32, 45, 53,
        51, 46, 55, 53, 51, 50, 57, 53, 54, 54, 49, 51, 53, 51, 52, 44, 45, 50,
        50, 46, 52, 50, 55, 56, 52, 54, 51, 56, 49, 49, 49, 48, 55, 44, 48, 60,
        47, 99, 111, 111, 114, 100, 105, 110, 97, 116, 101, 115, 62, 60, 47, 76,
        105, 110, 101, 97, 114, 82, 105, 110, 103, 62, 60, 47, 111, 117, 116,
        101, 114, 66, 111, 117, 110, 100, 97, 114, 121, 73, 115, 62, 60, 47, 80,
        111, 108, 121, 103, 111, 110, 62, 10, 32, 32, 60, 47, 80, 108, 97, 99,
        101, 109, 97, 114, 107, 62, 10, 32, 32, 60, 80, 108, 97, 99, 101, 109,
        97, 114, 107, 62, 10, 9, 60, 110, 97, 109, 101, 62, 97, 112, 112, 45,
        48, 51, 60, 47, 110, 97, 109, 101, 62, 10, 9, 60, 83, 116, 121, 108,
        101, 62, 60, 76, 105, 110, 101, 83, 116, 121, 108, 101, 62, 60, 99, 111,
        108, 111, 114, 62, 102, 102, 48, 48, 48, 48, 102, 102, 60, 47, 99, 111,
        108, 111, 114, 62, 60, 47, 76, 105, 110, 101, 83, 116, 121, 108, 101,
        62, 60, 80, 111, 108, 121, 83, 116, 121, 108, 101, 62, 60, 102, 105,
        108, 108, 62, 48, 60, 47, 102, 105, 108, 108, 62, 60, 47, 80, 111, 108,
        121, 83, 116, 121, 108, 101, 62, 60, 47, 83, 116, 121, 108, 101, 62, 10,
        32, 32, 32, 32, 32, 32, 60, 80, 111, 108, 121, 103, 111, 110, 62, 60,
        111, 117, 116, 101, 114, 66, 111, 117, 110, 100, 97, 114, 121, 73, 115,
        62, 60, 76, 105, 110, 101, 97, 114, 82, 105, 110, 103, 62, 60, 99, 111,
        111, 114, 100, 105, 110, 97, 116, 101, 115, 62, 45, 53, 51, 46, 55, 54,
        56, 48, 50, 56, 55, 53, 53, 52, 55, 52, 50, 44, 45, 50, 50, 46, 52, 50,
        52, 50, 56, 57, 55, 50, 48, 49, 48, 56, 49, 44, 48, 32, 45, 53, 51, 46,
        55, 54, 56, 51, 51, 57, 53, 51, 49, 54, 55, 56, 51, 44, 45, 50, 50, 46,
        52, 50, 51, 57, 55, 56, 57, 52, 51, 57, 48, 52, 44, 48, 32, 45, 53, 51,
        46, 55, 54, 56, 54, 54, 49, 56, 49, 56, 49, 49, 50, 50, 44, 45, 50, 50,
        46, 52, 50, 51, 57, 57, 48, 52, 53, 52, 49, 51, 51, 56, 44, 48, 32, 45,
        53, 51, 46, 55, 54, 56, 57, 50, 54, 53, 53, 51, 51, 57, 55, 50, 44, 45,
        50, 50, 46, 52, 50, 52, 50, 56, 57, 55, 50, 48, 49, 48, 56, 49, 44, 48,
        32, 45, 53, 51, 46, 55, 54, 56, 57, 52, 57, 53, 55, 51, 56, 53, 54, 56,
        44, 45, 50, 50, 46, 52, 50, 52, 55, 48, 52, 48, 56, 56, 51, 56, 48, 50,
        44, 48, 32, 45, 53, 51, 46, 55, 54, 56, 56, 51, 52, 52, 55, 49, 53, 53,
        56, 57, 44, 45, 50, 50, 46, 52, 50, 53, 50, 50, 50, 48, 52, 56, 55, 50,
        48, 52, 44, 48, 32, 45, 53, 51, 46, 55, 54, 56, 55, 51, 48, 56, 55, 57,
        52, 57, 48, 57, 44, 45, 50, 50, 46, 52, 50, 53, 53, 55, 56, 56, 54, 53,
        56, 52, 51, 55, 44, 48, 32, 45, 53, 51, 46, 55, 54, 56, 55, 48, 55, 56,
        53, 57, 48, 51, 49, 51, 44, 45, 50, 50, 46, 52, 50, 53, 55, 55, 52, 53,
        51, 57, 55, 52, 57, 57, 44, 48, 32, 45, 53, 51, 46, 55, 54, 56, 55, 55,
        54, 57, 50, 48, 52, 49, 44, 45, 50, 50, 46, 52, 50, 53, 57, 52, 55, 49,
        57, 51, 49, 57, 54, 55, 44, 48, 32, 45, 53, 51, 46, 55, 54, 56, 54, 54,
        49, 56, 49, 56, 49, 49, 50, 50, 44, 45, 50, 50, 46, 52, 50, 54, 49, 48,
        56, 51, 51, 54, 52, 49, 51, 54, 44, 48, 32, 45, 53, 51, 46, 55, 54, 56,
        52, 53, 52, 54, 51, 51, 57, 55, 54, 49, 44, 45, 50, 50, 46, 52, 50, 54,
        52, 52, 50, 49, 51, 51, 48, 55, 55, 51, 44, 48, 32, 45, 53, 51, 46, 55,
        54, 56, 50, 56, 49, 57, 56, 48, 53, 50, 57, 52, 44, 45, 50, 50, 46, 52,
        50, 54, 57, 51, 55, 48, 55, 50, 57, 53, 55, 57, 44, 48, 32, 45, 53, 51,
        46, 55, 54, 56, 50, 57, 51, 52, 57, 48, 55, 53, 57, 50, 44, 45, 50, 50,
        46, 52, 50, 55, 51, 53, 49, 52, 52, 49, 50, 51, 48, 49, 44, 48, 32, 45,
        53, 51, 46, 55, 54, 56, 50, 57, 51, 52, 57, 48, 55, 53, 57, 50, 44, 45,
        50, 50, 46, 52, 50, 55, 57, 50, 54, 57, 53, 50, 55, 49, 57, 50, 44, 48,
        32, 45, 53, 51, 46, 55, 54, 56, 50, 49, 50, 57, 49, 57, 49, 53, 48, 55,
        44, 45, 50, 50, 46, 52, 50, 56, 51, 54, 52, 51, 52, 49, 52, 53, 48, 57,
        44, 48, 32, 45, 53, 51, 46, 55, 54, 56, 49, 54, 54, 56, 55, 56, 50, 51,
        49, 54, 44, 45, 50, 50, 46, 52, 50, 56, 56, 52, 55, 55, 55, 49, 49, 48,
        49, 55, 44, 48, 32, 45, 53, 51, 46, 55, 54, 56, 48, 50, 56, 55, 53, 53,
        52, 55, 52, 50, 44, 45, 50, 50, 46, 52, 50, 56, 57, 56, 53, 56, 57, 51,
        56, 53, 57, 49, 44, 48, 32, 45, 53, 51, 46, 55, 54, 55, 52, 57, 57, 50,
        56, 52, 57, 48, 52, 50, 44, 45, 50, 50, 46, 52, 50, 57, 50, 51, 57, 49,
        49, 56, 57, 49, 52, 51, 44, 48, 32, 45, 53, 51, 46, 55, 54, 55, 50, 56,
        48, 53, 57, 48, 53, 51, 56, 52, 44, 45, 50, 50, 46, 52, 50, 57, 50, 54,
        50, 49, 51, 57, 51, 55, 51, 56, 44, 48, 32, 45, 53, 51, 46, 55, 54, 54,
        57, 57, 50, 56, 51, 52, 55, 57, 51, 56, 44, 45, 50, 50, 46, 52, 50, 57,
        49, 53, 56, 53, 52, 55, 51, 48, 53, 56, 44, 48, 32, 45, 53, 51, 46, 55,
        54, 54, 57, 56, 49, 51, 50, 52, 53, 54, 52, 44, 45, 50, 50, 46, 52, 50,
        57, 48, 53, 52, 57, 53, 53, 50, 51, 55, 56, 44, 48, 32, 45, 53, 51, 46,
        55, 54, 55, 48, 50, 55, 51, 54, 53, 52, 56, 51, 50, 44, 45, 50, 50, 46,
        52, 50, 56, 56, 55, 48, 55, 57, 49, 53, 54, 49, 51, 44, 48, 32, 45, 53,
        51, 46, 55, 54, 55, 51, 51, 56, 49, 52, 49, 54, 56, 55, 51, 44, 45, 50,
        50, 46, 52, 50, 56, 51, 57, 56, 56, 55, 50, 49, 52, 48, 50, 44, 48, 32,
        45, 53, 51, 46, 55, 54, 55, 54, 51, 55, 52, 48, 55, 54, 54, 49, 54, 44,
        45, 50, 50, 46, 52, 50, 55, 57, 55, 50, 57, 57, 51, 54, 51, 56, 51, 44,
        48, 32, 45, 53, 51, 46, 55, 54, 55, 52, 51, 48, 50, 50, 51, 53, 50, 53,
        53, 44, 45, 50, 50, 46, 52, 50, 55, 55, 54, 53, 56, 48, 57, 53, 48, 50,
        50, 44, 48, 32, 45, 53, 51, 46, 55, 54, 55, 51, 51, 56, 49, 52, 49, 54,
        56, 55, 51, 44, 45, 50, 50, 46, 52, 50, 55, 51, 48, 53, 52, 48, 48, 51,
        49, 48, 57, 44, 48, 32, 45, 53, 51, 46, 55, 54, 55, 51, 52, 57, 54, 53,
        49, 57, 49, 55, 49, 44, 45, 50, 50, 46, 52, 50, 54, 56, 52, 52, 57, 57,
        49, 49, 49, 57, 55, 44, 48, 32, 45, 53, 51, 46, 55, 54, 55, 53, 52, 53,
        51, 50, 53, 56, 50, 51, 52, 44, 45, 50, 50, 46, 52, 50, 53, 56, 51, 50,
        48, 57, 48, 56, 57, 56, 57, 44, 48, 32, 45, 53, 51, 46, 55, 54, 55, 56,
        54, 55, 54, 49, 50, 50, 53, 55, 51, 44, 45, 50, 50, 46, 52, 50, 53, 48,
        48, 51, 51, 53, 52, 51, 53, 52, 54, 44, 48, 32, 45, 53, 51, 46, 55, 54,
        56, 48, 48, 53, 55, 51, 53, 48, 49, 52, 54, 44, 45, 50, 50, 46, 52, 50,
        52, 51, 50, 52, 50, 53, 48, 55, 57, 55, 52, 44, 48, 32, 45, 53, 51, 46,
        55, 54, 56, 48, 48, 53, 55, 51, 53, 48, 49, 52, 54, 44, 45, 50, 50, 46,
        52, 50, 52, 51, 50, 52, 50, 53, 48, 55, 57, 55, 52, 44, 48, 32, 45, 53,
        51, 46, 55, 54, 56, 48, 50, 56, 55, 53, 53, 52, 55, 52, 50, 44, 45, 50,
        50, 46, 52, 50, 52, 50, 56, 57, 55, 50, 48, 49, 48, 56, 49, 44, 48, 60,
        47, 99, 111, 111, 114, 100, 105, 110, 97, 116, 101, 115, 62, 60, 47, 76,
        105, 110, 101, 97, 114, 82, 105, 110, 103, 62, 60, 47, 111, 117, 116,
        101, 114, 66, 111, 117, 110, 100, 97, 114, 121, 73, 115, 62, 60, 47, 80,
        111, 108, 121, 103, 111, 110, 62, 10, 32, 32, 60, 47, 80, 108, 97, 99,
        101, 109, 97, 114, 107, 62, 10, 32, 32, 60, 80, 108, 97, 99, 101, 109,
        97, 114, 107, 62, 10, 9, 60, 110, 97, 109, 101, 62, 97, 112, 112, 45,
        48, 49, 60, 47, 110, 97, 109, 101, 62, 10, 9, 60, 83, 116, 121, 108,
        101, 62, 60, 76, 105, 110, 101, 83, 116, 121, 108, 101, 62, 60, 99, 111,
        108, 111, 114, 62, 102, 102, 48, 48, 48, 48, 102, 102, 60, 47, 99, 111,
        108, 111, 114, 62, 60, 47, 76, 105, 110, 101, 83, 116, 121, 108, 101,
        62, 60, 80, 111, 108, 121, 83, 116, 121, 108, 101, 62, 60, 102, 105,
        108, 108, 62, 48, 60, 47, 102, 105, 108, 108, 62, 60, 47, 80, 111, 108,
        121, 83, 116, 121, 108, 101, 62, 60, 47, 83, 116, 121, 108, 101, 62, 10,
        32, 32, 32, 32, 32, 32, 60, 80, 111, 108, 121, 103, 111, 110, 62, 60,
        111, 117, 116, 101, 114, 66, 111, 117, 110, 100, 97, 114, 121, 73, 115,
        62, 60, 76, 105, 110, 101, 97, 114, 82, 105, 110, 103, 62, 60, 99, 111,
        111, 114, 100, 105, 110, 97, 116, 101, 115, 62, 45, 53, 51, 46, 55, 53,
        53, 51, 54, 52, 54, 50, 53, 49, 53, 54, 55, 44, 45, 50, 50, 46, 52, 52,
        52, 52, 55, 49, 52, 54, 57, 50, 53, 49, 56, 44, 48, 32, 45, 53, 51, 46,
        55, 53, 52, 51, 54, 56, 57, 57, 48, 50, 56, 48, 53, 44, 45, 50, 50, 46,
        52, 52, 52, 48, 57, 55, 51, 56, 54, 55, 56, 51, 57, 44, 48, 32, 45, 53,
        51, 46, 55, 53, 51, 57, 55, 55, 54, 52, 50, 52, 54, 55, 57, 44, 45, 50,
        50, 46, 52, 52, 51, 57, 57, 57, 53, 52, 57, 56, 51, 48, 56, 44, 48, 32,
        45, 53, 51, 46, 55, 53, 51, 53, 49, 49, 52, 55, 56, 49, 54, 49, 56, 44,
        45, 50, 50, 46, 52, 52, 52, 49, 56, 57, 52, 54, 56, 54, 50, 50, 50, 44,
        48, 32, 45, 53, 51, 46, 55, 53, 51, 48, 50, 50, 50, 57, 51, 51, 57, 54,
        49, 44, 45, 50, 50, 46, 52, 52, 52, 52, 51, 54, 57, 51, 56, 53, 54, 50,
        53, 44, 48, 32, 45, 53, 51, 46, 55, 53, 50, 52, 56, 49, 51, 49, 50, 53,
        57, 54, 51, 44, 45, 50, 50, 46, 52, 52, 52, 54, 53, 53, 54, 51, 50, 57,
        50, 56, 52, 44, 48, 32, 45, 53, 51, 46, 55, 53, 50, 50, 49, 54, 53, 55,
        55, 51, 49, 49, 51, 44, 45, 50, 50, 46, 52, 52, 52, 55, 54, 52, 57, 56,
        48, 49, 49, 49, 51, 44, 48, 32, 45, 53, 51, 46, 55, 53, 49, 56, 48, 55,
        57, 54, 52, 49, 53, 52, 49, 44, 45, 50, 50, 46, 52, 52, 53, 48, 52, 54,
        57, 56, 48, 55, 52, 48, 57, 44, 48, 32, 45, 53, 51, 46, 55, 53, 49, 52,
        54, 50, 54, 53, 55, 50, 54, 48, 54, 44, 45, 50, 50, 46, 52, 52, 53, 48,
        50, 51, 57, 54, 48, 50, 56, 49, 52, 44, 48, 32, 45, 53, 51, 46, 55, 53,
        48, 56, 54, 57, 56, 56, 48, 52, 50, 54, 56, 44, 45, 50, 50, 46, 52, 52,
        53, 48, 57, 56, 55, 55, 54, 55, 55, 53, 44, 48, 32, 45, 53, 51, 46, 55,
        53, 48, 53, 48, 55, 51, 48, 56, 49, 56, 56, 55, 44, 45, 50, 50, 46, 52,
        52, 53, 49, 56, 53, 49, 48, 51, 52, 57, 56, 51, 44, 48, 32, 45, 53, 51,
        46, 55, 53, 48, 50, 56, 56, 54, 49, 51, 56, 50, 50, 57, 44, 45, 50, 50,
        46, 52, 52, 53, 51, 54, 57, 50, 54, 55, 49, 55, 52, 56, 44, 48, 32, 45,
        53, 51, 46, 55, 53, 48, 49, 52, 52, 55, 51, 53, 57, 53, 48, 54, 44, 45,
        50, 50, 46, 52, 52, 53, 53, 51, 48, 52, 49, 48, 51, 57, 49, 56, 44, 48,
        32, 45, 53, 51, 46, 55, 53, 48, 48, 52, 49, 49, 52, 51, 56, 56, 50, 53,
        44, 45, 50, 50, 46, 52, 52, 53, 56, 49, 56, 49, 54, 54, 49, 51, 54, 51,
        44, 48, 32, 45, 53, 51, 46, 55, 53, 48, 48, 53, 50, 54, 53, 52, 49, 49,
        50, 51, 44, 45, 50, 50, 46, 52, 52, 53, 57, 53, 48, 53, 51, 51, 55, 55,
        56, 56, 44, 48, 32, 45, 53, 51, 46, 55, 53, 48, 49, 57, 48, 55, 55, 54,
        56, 54, 57, 55, 44, 45, 50, 50, 46, 52, 52, 54, 48, 53, 52, 49, 50, 53,
        56, 52, 54, 57, 44, 48, 32, 45, 53, 51, 46, 55, 53, 48, 55, 52, 51, 50,
        54, 55, 56, 57, 57, 50, 44, 45, 50, 50, 46, 52, 52, 54, 48, 56, 50, 57,
        48, 49, 52, 50, 49, 51, 44, 48, 32, 45, 53, 51, 46, 55, 53, 49, 51, 55,
        48, 53, 55, 53, 52, 50, 50, 51, 44, 45, 50, 50, 46, 52, 52, 54, 48, 52,
        56, 51, 55, 48, 55, 51, 50, 44, 48, 32, 45, 53, 51, 46, 55, 53, 50, 50,
        50, 50, 51, 51, 50, 52, 50, 54, 50, 44, 45, 50, 50, 46, 52, 52, 53, 56,
        55, 53, 55, 49, 55, 50, 56, 53, 50, 44, 48, 32, 45, 53, 51, 46, 55, 53,
        50, 57, 57, 57, 50, 55, 50, 57, 51, 54, 53, 44, 45, 50, 50, 46, 52, 52,
        53, 54, 54, 50, 55, 55, 56, 48, 51, 52, 51, 44, 48, 32, 45, 53, 51, 46,
        55, 53, 51, 55, 57, 51, 52, 55, 56, 55, 57, 49, 52, 44, 45, 50, 50, 46,
        52, 52, 53, 51, 57, 56, 48, 52, 50, 55, 52, 57, 51, 44, 48, 32, 45, 53,
        51, 46, 55, 53, 52, 51, 48, 53, 54, 56, 52, 48, 49, 54, 55, 44, 45, 50,
        50, 46, 52, 52, 53, 48, 56, 49, 53, 49, 49, 52, 51, 48, 51, 44, 48, 32,
        45, 53, 51, 46, 55, 53, 52, 55, 50, 53, 56, 48, 55, 52, 48, 51, 56, 44,
        45, 50, 50, 46, 52, 52, 52, 56, 51, 52, 48, 52, 49, 52, 57, 44, 48, 32,
        45, 53, 51, 46, 55, 53, 53, 51, 54, 52, 54, 50, 53, 49, 53, 54, 55, 44,
        45, 50, 50, 46, 52, 52, 52, 52, 55, 49, 52, 54, 57, 50, 53, 49, 56, 44,
        48, 60, 47, 99, 111, 111, 114, 100, 105, 110, 97, 116, 101, 115, 62, 60,
        47, 76, 105, 110, 101, 97, 114, 82, 105, 110, 103, 62, 60, 47, 111, 117,
        116, 101, 114, 66, 111, 117, 110, 100, 97, 114, 121, 73, 115, 62, 60,
        47, 80, 111, 108, 121, 103, 111, 110, 62, 10, 32, 32, 60, 47, 80, 108,
        97, 99, 101, 109, 97, 114, 107, 62, 10, 60, 47, 70, 111, 108, 100, 101,
        114, 62, 10, 60, 47, 68, 111, 99, 117, 109, 101, 110, 116, 62, 60, 47,
        107, 109, 108, 62, 10,
      ]);
      const request: CreateProtectedAreaRequest = {
        file: {
          fieldname: 'file',
          originalname: 'test.kml',
          encoding: '7bit',
          mimetype: 'text/plain', //"application/vnd.google-earth.kml+xml"
          size: 10240000,
          buffer: Buffer.copyBytesFrom(u8, 0, 4543),
          stream: new Readable(),
          destination: '',
          filename: '',
          path: '',
        },
        description: 'teste',
        typeId: 1,
        organizationId: 2,
        userId: 3,
      };

      const repositorySpy = {
        createMany: jest.spyOn(repository, 'createMany').mockResolvedValue(3),
      };

      // Act
      const result = await useCase.execute(request);

      // Assert
      expect(repositorySpy.createMany).toHaveBeenCalledWith(
        [
          '{"type":"Polygon","coordinates":[[[-53.7532956613534,-22.4278463811107,0],[-53.7516496984946,-22.4268449911197,0],[-53.7510166358566,-22.4262579694008,0],[-53.7509360642481,-22.4255328249245,0],[-53.7512468404522,-22.4248307009078,0],[-53.7517072496435,-22.4243818019463,0],[-53.7522021895241,-22.4241976382698,0],[-53.7527086396345,-22.4241285768911,0],[-53.753261130664,-22.4241285768911,0],[-53.7538596626127,-22.4243012303379,0],[-53.7543546024933,-22.424450863325,0],[-53.754688399157,-22.4246350270015,0],[-53.7551027674291,-22.4250378850439,0],[-53.7553905231737,-22.4254407430863,0],[-53.7556207277693,-22.4259126625073,0],[-53.7559084835139,-22.4265572353751,0],[-53.7561962392584,-22.4271672775535,0],[-53.7561732187989,-22.4280535652467,0],[-53.7559890551223,-22.428513974438,0],[-53.7557473402969,-22.4287326688039,0],[-53.7551948492674,-22.428882301791,0],[-53.7541704388168,-22.4284218925998,0],[-53.7541704388168,-22.4284218925998,0],[-53.7532956613534,-22.4278463811107,0]]]}',
          '{"type":"Polygon","coordinates":[[[-53.7680287554742,-22.4242897201081,0],[-53.7683395316783,-22.423978943904,0],[-53.7686618181122,-22.4239904541338,0],[-53.7689265533972,-22.4242897201081,0],[-53.7689495738568,-22.4247040883802,0],[-53.7688344715589,-22.4252220487204,0],[-53.7687308794909,-22.4255788658437,0],[-53.7687078590313,-22.4257745397499,0],[-53.76877692041,-22.4259471931967,0],[-53.7686618181122,-22.4261083364136,0],[-53.7684546339761,-22.4264421330773,0],[-53.7682819805294,-22.4269370729579,0],[-53.7682934907592,-22.4273514412301,0],[-53.7682934907592,-22.4279269527192,0],[-53.7682129191507,-22.4283643414509,0],[-53.7681668782316,-22.4288477711017,0],[-53.7680287554742,-22.4289858938591,0],[-53.7674992849042,-22.4292391189143,0],[-53.7672805905384,-22.4292621393738,0],[-53.7669928347938,-22.4291585473058,0],[-53.766981324564,-22.4290549552378,0],[-53.7670273654832,-22.4288707915613,0],[-53.7673381416873,-22.4283988721402,0],[-53.7676374076616,-22.4279729936383,0],[-53.7674302235255,-22.4277658095022,0],[-53.7673381416873,-22.4273054003109,0],[-53.7673496519171,-22.4268449911197,0],[-53.7675453258234,-22.4258320908989,0],[-53.7678676122573,-22.4250033543546,0],[-53.7680057350146,-22.4243242507974,0],[-53.7680057350146,-22.4243242507974,0],[-53.7680287554742,-22.4242897201081,0]]]}',
          '{"type":"Polygon","coordinates":[[[-53.7553646251567,-22.4444714692518,0],[-53.7543689902805,-22.4440973867839,0],[-53.7539776424679,-22.4439995498308,0],[-53.7535114781618,-22.4441894686222,0],[-53.7530222933961,-22.4444369385625,0],[-53.7524813125963,-22.4446556329284,0],[-53.7522165773113,-22.4447649801113,0],[-53.7518079641541,-22.4450469807409,0],[-53.7514626572606,-22.4450239602814,0],[-53.7508698804268,-22.445098776775,0],[-53.7505073081887,-22.4451851034983,0],[-53.7502886138229,-22.4453692671748,0],[-53.7501447359506,-22.4455304103918,0],[-53.7500411438825,-22.4458181661363,0],[-53.7500526541123,-22.4459505337788,0],[-53.7501907768697,-22.4460541258469,0],[-53.7507432678992,-22.4460829014213,0],[-53.7513705754223,-22.446048370732,0],[-53.7522223324262,-22.4458757172852,0],[-53.7529992729365,-22.4456627780343,0],[-53.7537934787914,-22.4453980427493,0],[-53.7543056840167,-22.4450815114303,0],[-53.7547258074038,-22.44483404149,0],[-53.7553646251567,-22.4444714692518,0]]]}',
        ],
        'teste',
        1,
        2,
        3,
      );

      expect(result).toEqual(3);
    });
  });
});
